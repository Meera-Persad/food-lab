<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Beverages and Desserts</title>
   <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto:wght@300;400&display=swap" rel="stylesheet">

  <style>
    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: 'Playfair Display', serif;
    }
    body {
        background-color: #ab7661;
        text-align: center;
        padding: 20px;
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat; 
    }

    nav {
        background: #6a0572;
        padding: 15px 0;
        color: white;
        font-size: 24px;
        font-weight: 600;
    }

    section {
        margin: 20px 0;
    }
    button {
        background-color: #6a0572;
        color: white;
        border: none;
        padding: 10px 20px;
        margin: 5px;
        border-radius: 20px;
        font-size: 16px;
    }

    button:hover {
        background-color: white;
        color: #6a0572;
        border: 2px solid #6a0572;
    }

    input[type="search"] {
        padding: 10px;
        border-radius: 20px;
        border: 1px solid #ccc;
        outline: none;
        width: 200px;
    }
    section.filter-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 20px 0;
      padding: 0 20px; 
      flex-wrap: wrap; 
    }

    .filter-buttons {
      display: flex;
      gap: 10px;
    }

    .search-box {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .search-box input[type="search"] {
      padding: 8px 12px;
      font-size: 16px;
      border-radius: 20px;
      border: 2px solid #283618;
    }

    .card:hover {
      box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);
    }

    
    .container {
      padding: 2px 16px;
    }
    main {
      display: flex;
      flex-direction: row;
      padding: 15px;
      flex-wrap: wrap;
      justify-content: space-evenly;
      align-items: center;
      align-content: space-between;
      flex-grow: 10;
    }
    main>section{
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      justify-content: space-evenly;
      align-items: center;
      align-content: space-between;

    }header {
      position: fixed;
      top: 0;
       width: 100%;
      z-index: 1000;
      background-color: #BC6C25;
    }

    .linksbev {
      display: flex;
      justify-content: center;
      gap: 20px;
      background-color: #BC6C25;
      padding: 10px 0;
      width: 100%;
    }

    .linksbev a {
      color: white;
      font-size: 1rem;
      letter-spacing: 1px;
      padding: 5px 10px;
      text-decoration: none;
      position: relative;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .linksbev a:hover,
    .linksbev a.active {
      background-color: #FEFAE0;
      color: #BC6C25;
      font-weight: bold;
      outline: 2px solid #DDA15E;
    }
    .linksbev a.active {
      background-color: #FEFAE0;
      color: #BC6C25;
      font-weight: bold;
      outline: 2px solid #DDA15E;
    }

    .fav-icon {
      width: 18px;
      height: 18px;
    }

    
    .fav-icon {
        width: 18px;
        height: 18px;
    
    background-color: #DDA15E; color: white;
        font-size: 0.75rem; 
        font-weight: bold;
        padding: 4px 8px;  
        border-radius: 50%;
        position: absolute;
        top: -5px;
        right: -10px;  display: inline-flex;
        justify-content: center;
        align-items: center;
        min-width: 20px; 
         min-height: 20px; 
     }
    .fav-badge {
    background-color: #BC6C25; 
    color: white; 
    font-size: 0.75rem;
    font-weight: bold;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    position: absolute;
    top: -5px;
    right: -12px;
    display: flex;
    justify-content: center;
    align-items: center;
    box-sizing: border-box;
      border: 2px solid #FEFAE0;
    }
   
    .howto{
      .pacifico-regular {
        font-family: 'Playfair Display', serif;
        font-weight: 400;
        font-style: normal;
      }
      background-color:#cfb082;
      padding-bottom:0;
      margin-bottom:0;
      color: white;
    }

      video {
          width: 100%;
          height: 100%;

        padding:0;
        margin:0;
        border : 2px solid #6a0572;
      }
    .howto{
      justify-content: space-between;
      align-items: center;
      justify-items: space-evenly;
    }
    .howto{
        font-family: 'Playfair Display', serif;
        font-weight: bold;
      background-color: #283618;
      padding-bottom:0;
      font-size: 35px;
      margin-bottom: 0;
      padding-bottom: 0;
      border-radius: 12px;
  border : 2px solid #606C38;
      justify-content:center;
      align-items: center;
    }


      
      .card:hover {
        box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);
      }

      html,
      body {
        height: 100vh;
        margin: 0;
        width: 100vw;

      }
html, body {
  background-image: url("https://static.wixstatic.com/media/9fdacc_140531eb6b0d4a5fbe6613b848b649a1.jpg/v1/fill/w_1351,h_798,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/9fdacc_140531eb6b0d4a5fbe6613b848b649a1.jpg");
  background-size: cover; 
  background-position: center; 
  background-repeat: repeat; 


}

      nav {
        background-color: blueviolet;
        flex-grow: 1;
        position: relative; 
        z-index: 10;
      }

      nav>h1 {
        text-align: center;
        color: white;
        margin-bottom: 0;
      }

      article {
        display: flex;
        justify-content: flex-start;
        padding: 10px;
        align-items: center;
        gap: 40px;
        height: 60px;
      }

      button {
        border: none;
        box-shadow: -1px 10px 11px -7px rgba(0, 0, 0, 0.65);
        height: 25px;
        width: 120px;
        border-radius: 10px;
        color: white;
        background-color: blueviolet;
      }

      button:hover {
        background-color: white;
        color: #606C38;
        text-decoration: 1px solid #606C38;
      }

      button:disabled {
        background-color: #606C38;
        color: linen;
        opacity: 1;
      }

      button:disabled:hover {
        background-color: dimgrey;
        color: linen;
        opacity: 1;
      }

      section {
        padding: 5px;
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        align-items: center;
        flex-direction: row;
        align-items: center;
        max-height: 100%;

      }



      .item {
        height: 100px;
        width: 100%;
        background-color: white;
        border-radius: 10px;
        padding: 5px;
        text-align: left;
      }

      .card{
        padding: 10px;
        margin: 10px;
        text-align: center;
        background-color: white;
        border-radius: 15px;
        flex-grow: 1;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
        width:200px;
        height: 250px;
      }

    section {
        margin: 20px 0;
      justify-content: space-evenly;
    }
    button {
        background-color: #283618;
        color: white;
        border: none;
        padding: 10px 20px;
        margin: 5px;
        border-radius: 20px;
        font-size: 16px;
      height: 50px;
    }

    button:hover {
        background-color: #FEFAE0;
        color: #6a0572;
        border: 2px solid #6a0572;
    }

    input[type="search"] {
        padding: 10px;
        border-radius: 20px;
        border: 1px solid #ccc;
        outline: none;
        width: 200px;
    }
    .card:hover {
        transform: scale(1.1);
    }
    .card-content {
         position: absolute; 
        top: 0px;
        left: 0;
        width: 100%;
        height: 100%;
        background: white;
        opacity: 0;
        transition: opacity 0.3s ease-in-out;
       background-color: #FEFAE0;
      justify-content: center;
      align-items: center;
      align-content: center;
      border: 3px dotted #606C38;
    }

    .card:hover .card-content {
        opacity: 1;
    }

    #view-favs {
      background-color: #283618;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
      margin-top: 20px;
      border-radius: 10px;
      height: 5vh;
      width: 90vw;
      text-decoration: none;
      font-size: 30px;
      font-weight: bold;
      color: white;
    }
          #view-favs:hover{
            background-color: #FEFAE0;
            color: black;
            border: 2px solid #BC6C25;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
          }
    iframe {
        position: relative;
        z-index: 1; 
    }


  </style>
</head>

<body>
  <header >

    <nav class="linksbev"  id="navLinks">
        <a href="/index.html">Home</a>
        <a href="/meals.html">Meals</a>
        <a href="/bev.html">Beverages and Desserts</a>
      <a href="/favourites.html" id="favourites-link">
         Favourites
         <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-heart-icon lucide-heart"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>
        <span id="fav-count" class="fav-badge" style="display: none;">0</span>
        </a>
       <a href="/mealdbapi.html">Meal Generator</a>
        <a href="/contact.html">Contact Us</a>
        
    </nav>
  </header>


<br><br><br>  <section class="howto">
    BE EDUCATED
  </section>

  <section>
    <div>
      <iframe width="560" height="315" src="https://www.youtube.com/embed/57F7nwRoZxI?si=MYWaQx0GXcU4OBbZ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay">

      </iframe>
      </div>
  </section>

  <section class="filter-bar">
    <div class="filter-buttons"> 
    <button onclick="filterByType('Beverages')">Beverages</button>
    <button onclick="filterByType('Desserts')">Desserts</button>
    </div>
    <div class="search-box">
    <input type="search" id="searchKey" placeholder="Search Name">
    <button onclick="search()">Search</button>
      </div>
  </section>

   <a href="favourites.html" id="view-favs">View Favourites</a>

  <main id="result">

  </main>
  <aside id="favourites">

  </aside>
   <script>




     let result = document.querySelector('#result');

     function renderBev(item) {

     let html = '';
     let result = document.querySelector('#result');
     for (let rec of item) {
       html += `<div class="card">
           <img style= "border-radius:10px; height:130px; width:170px" src="${rec.image}" alt="Image" style="width:100%">
           <h3>Name:  ${rec.name}</h3>
           <p><b><em>Type: </em></b> ${rec.type}</p> <br>
           <div class="card-content">


            <p><b><em>Description: </em></b>${rec.description}</p> <br>
            <p><b><em>Price: $ </em></b>${rec.price}</p> 
             <button style="width:150px;height:60px" onclick="addFavourite(${rec.id})">Add to Favourites</button>
           </div>


       </div>`;


     }
     result.innerHTML = html;
     }

     let state = [];
     async function getData(){
       const response = await fetch('https://api.sheety.co/7b6265cbb8830b7dae6e7d6910623721/newbevs/sheet1');
       const data = await response.json();
       return data.sheet1;
     }

     async function showAllData(){
       state = await getData();
       renderBev(state);
     }
     showAllData();


     function filterByType(type){
       let filtered = [];
       for(let rec of state){
         if(rec.type == type){
           filtered.push(rec);
         }
       }
       renderBev(filtered);
     }

     function search(){
       let searchKey = document.querySelector('#searchKey').value;
       let filtered = [];
       for(let rec of state){
         let searchText = rec.name.toUpperCase();
         searchKey = searchKey.toUpperCase();
         if(searchText.search(searchKey) !== -1){
           filtered.push(rec);
         }
       }
       renderBev(filtered);
     }




     let favourites = [];

    

     function addFavourite(id) {
       const item = state.find(rec => rec.id === id);
       if (!item) return;

       let stored = JSON.parse(localStorage.getItem('favourites')) || [];
       const exists = stored.some(fav => fav.id === id);

       if (!exists) {
         stored.push(item);
         localStorage.setItem('favourites', JSON.stringify(stored));
         updateFavBadge(); 
       }
     }
     
     function removeFavourite(id) {
       let index = favourites.findIndex(rec => rec.id == id);
       favourites.splice(index, 1);
       renderFavourites()
     }
     function renderFavourites() {
       let favourites_list = document.querySelector('#favourites');
       let html = "";
       for (let rec of favourites) {
         html += `
         <div class="item">
           <p>Item name: ${rec.name}</p>
           <p>Price: $ ${rec.price}</p>
 <button onclick="removeFavourite(${rec.id})">Remove</button>
         </div>
         `;
       }
       favourites_list.innerHTML = html;
     }


     
     function updateFavBadge() {
       const favs = JSON.parse(localStorage.getItem('favourites')) || [];
       const favCount = document.getElementById('fav-count');
       if (!favCount) return;

       if (favs.length > 0) {
         favCount.innerText = favs.length;
         favCount.style.display = 'inline-block';
       } else {
         favCount.innerText = '0';
         favCount.style.display = 'none';
       }
     }
     window.addEventListener('DOMContentLoaded', () => {
       const links = document.querySelectorAll('#navLinks a');
       const currentPath = window.location.pathname;

       links.forEach(link => {
         const href = link.getAttribute('href');
         if (currentPath.includes(href)) {
           link.classList.add('active');
         }
       });

       updateFavBadge(); 
     });
    
      showAllData();
   </script>
   <script type="module" src="auth-header.js"></script>
</body>

</html>